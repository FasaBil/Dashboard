<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MOA Dashboard - TXT Music</title>
    <style>
        :root {
            --moa-pink-50: #fff1f2;
            --moa-pink-100: #ffe4e6;
            --moa-pink-200: #fecdd3;
            --moa-pink-300: #fda4af;
            --moa-pink-400: #fb7185;
            --moa-pink-500: #f43f5e;
            --moa-pink-600: #e11d48;
            --moa-pink-800: #9f1239;
            
            --moa-blue-100: #e0f2fe;
            --moa-blue-500: #0ea5e9;

            --grey-100: #f3f4f6;
            --grey-400: #9ca3af;
            --grey-500: #6b7280;
            --grey-600: #4b5563;
            --grey-700: #374151;

            --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
        }

        /* Reset & Global */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background-color: var(--moa-pink-50);
            color: var(--moa-pink-800);
            overflow: hidden;
            height: 100vh;
        }
        a {
            text-decoration: none;
            color: inherit;
        }
        button {
            font-family: inherit;
            border: none;
            background: none;
            cursor: pointer;
        }
        input {
            font-family: inherit;
        }

        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: var(--moa-pink-100);
        }
        ::-webkit-scrollbar-thumb {
            background: var(--moa-pink-300);
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: var(--moa-pink-400);
        }

        /* Layout Utama */
        .app-container {
            display: flex;
            height: 100vh;
        }

        /* Sidebar Navigasi (Kiri) */
        .sidebar-nav {
            width: 256px; /* w-64 */
            background-color: #ffffff;
            border-right: 1px solid var(--moa-pink-100);
            padding: 24px;
            flex-shrink: 0;
            transition: transform 0.3s ease-in-out;
        }
        .sidebar-nav-header {
            font-size: 1.5rem; /* text-2xl */
            font-weight: 700;
            color: var(--moa-pink-600);
            margin-bottom: 32px;
        }
        .nav-list {
            list-style: none;
            space-y: 16px;
            display: flex;
            flex-direction: column;
            gap: 16px;
        }
        .nav-item a {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 8px 16px;
            border-radius: 8px;
            color: var(--grey-600);
            transition: all 0.2s ease;
        }
        .nav-item a:hover {
            background-color: var(--moa-pink-100);
            color: var(--moa-pink-600);
        }
        .nav-item a.active {
            background-color: var(--moa-pink-100);
            color: var(--moa-pink-600);
            font-weight: 600;
        }
        .nav-section-title {
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--grey-400);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 16px;
            margin-top: 40px;
        }
        .playlist-list {
            list-style: none;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        .playlist-list a {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 0.875rem;
            color: var(--grey-500);
            transition: color 0.2s ease;
        }
        .playlist-list a:hover {
            color: var(--moa-pink-500);
        }

        /* Wrapper Konten Utama */
        .main-content-wrapper {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* Header */
        .main-header {
            background-color: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(4px);
            border-bottom: 1px solid var(--moa-pink-100);
            padding: 16px 24px;
            position: sticky;
            top: 0;
            z-index: 30;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        .header-left {
            display: flex;
            align-items: center;
            gap: 16px;
        }
        .mobile-btn {
            display: none; /* Sembunyikan di desktop */
            color: var(--moa-pink-500);
        }
        .search-bar {
            position: relative;
            width: 384px;
        }
        #search-input {
            width: 100%;
            padding: 8px 16px 8px 40px; /* pl-10 pr-4 py-2 */
            border-radius: 9999px; /* rounded-full */
            border: 1px solid var(--moa-pink-200);
            background-color: #ffffff;
            font-size: 0.875rem;
            color: var(--grey-700);
            outline: none;
        }
        #search-input::placeholder {
            color: var(--grey-400);
        }
        #search-input:focus {
            border-color: var(--moa-pink-300);
            box-shadow: 0 0 0 2px var(--moa-pink-200);
        }
        .search-bar .search-icon {
            position: absolute;
            top: 50%;
            left: 12px;
            transform: translateY(-50%);
            color: var(--grey-400);
        }
        .header-profile {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .header-profile span {
            font-size: 0.875rem;
            font-weight: 500;
        }
        .header-profile img {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid var(--moa-pink-200);
        }

        /* Area Konten Utama */
        .content-area {
            flex: 1;
            padding: 24px;
            overflow-y: auto;
        }
        .content-title {
            font-size: 1.5rem; /* text-2xl */
            font-weight: 700;
            margin-bottom: 24px;
            color: var(--moa-pink-600);
        }

        /* Grid Lagu */
        #song-grid {
            display: grid;
            grid-template-columns: repeat(1, 1fr);
            gap: 24px;
        }
        /* Grid breakpoints */
        @media (min-width: 640px) { /* sm */
            #song-grid { grid-template-columns: repeat(2, 1fr); }
        }
        @media (min-width: 1024px) { /* lg */
            #song-grid { grid-template-columns: repeat(3, 1fr); }
        }
        @media (min-width: 1280px) { /* xl */
            #song-grid { grid-template-columns: repeat(4, 1fr); }
        }
        @media (min-width: 1536px) { /* 2xl */
            #song-grid { grid-template-columns: repeat(5, 1fr); }
        }

        /* Kartu Lagu */
        .song-card {
            background-color: #ffffff;
            border-radius: 12px;
            box-shadow: var(--shadow-lg);
            overflow: hidden;
            transition: all 0.3s ease;
        }
        .song-card:hover {
            box-shadow: var(--shadow-xl);
            transform: translateY(-4px);
        }
        .card-image-wrapper {
            position: relative;
        }
        .card-image {
            width: 100%;
            height: 224px; /* h-56 */
            object-fit: cover;
        }
        .card-play-button {
            position: absolute;
            inset: 0;
            background-color: rgba(0, 0, 0, 0.4);
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        .song-card:hover .card-play-button {
            opacity: 1;
        }
        .play-button {
            width: 56px;
            height: 56px;
            border-radius: 50%;
            background-color: var(--moa-pink-500);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow-lg);
            transition: transform 0.2s ease;
        }
        .play-button:hover {
            transform: scale(1.1);
        }
        .play-button i {
            width: 28px;
            height: 28px;
            fill: white;
            margin-left: 4px; /* Penyesuaian agar ikon play pas di tengah */
        }
        .card-content {
            padding: 20px;
        }
        .card-title {
            font-weight: 700;
            font-size: 1.125rem; /* text-lg */
            color: var(--moa-pink-800);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        .card-album {
            font-size: 0.875rem;
            color: var(--grey-500);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        .card-genre-tag {
            display: inline-block;
            font-size: 0.75rem;
            font-weight: 600;
            padding: 2px 8px;
            border-radius: 9999px;
            margin-top: 12px;
        }
        /* Class untuk genre tags */
        .genre-pop { background-color: var(--moa-pink-100); color: var(--moa-pink-600); }
        .genre-rock { background-color: var(--grey-100); color: var(--grey-700); }
        .genre-r-b { background-color: #ede9fe; color: #7c3aed; }
        .genre-ballad { background-color: var(--moa-blue-100); color: var(--moa-blue-500); }
        .genre-afro-pop { background-color: #fef3c7; color: #b45309; }
        .genre-default { background-color: var(--grey-100); color: var(--grey-500); }

        /* Sidebar Filter (Kanan) */
        .sidebar-filter {
            width: 280px;
            background-color: #ffffff;
            border-left: 1px solid var(--moa-pink-100);
            padding: 24px;
            flex-shrink: 0;
            transition: transform 0.3s ease-in-out;
            overflow-y: auto;
        }
        .filter-title {
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: 24px;
        }
        .filter-section-title {
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--grey-500);
            margin-bottom: 16px;
            margin-top: 24px;
        }
        .filter-list {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        .filter-btn {
            padding: 6px 12px;
            border-radius: 8px;
            font-size: 0.875rem;
            font-weight: 500;
            color: var(--grey-700);
            background-color: var(--moa-pink-50);
            border: 1px solid var(--moa-pink-100);
            transition: all 0.2s ease;
        }
        .filter-btn:hover {
            background-color: var(--moa-pink-100);
            border-color: var(--moa-pink-200);
        }
        .filter-btn.active {
            background-color: var(--moa-pink-500);
            color: #ffffff;
            border-color: var(--moa-pink-500);
            font-weight: 600;
        }

        /* Pesan 'Tidak Ditemukan' */
        #no-results {
            text-align: center;
            color: var(--grey-500);
            margin-top: 40px;
        }
        #no-results .no-results-icon {
            width: 64px;
            height: 64px;
            margin: 0 auto 16px;
            color: var(--moa-pink-200);
        }
        #no-results h3 {
            font-size: 1.25rem;
            font-weight: 600;
        }
        #no-results p {
            font-size: 0.875rem;
        }

        /* Sidebar Mobile (Navigasi Kiri) */
        #sidebar-backdrop {
            position: fixed;
            inset: 0;
            background-color: rgba(0, 0, 0, 0.3);
            z-index: 40;
            display: none; /* hidden */
        }
        #mobile-sidebar {
            position: fixed;
            top: 0;
            bottom: 0;
            left: 0;
            width: 256px;
            background-color: #ffffff;
            padding: 24px;
            z-index: 50;
            transform: translateX(-100%);
            transition: transform 0.3s ease-in-out;
        }
        #close-sidebar-btn {
            position: absolute;
            top: 16px;
            right: 16px;
            color: var(--grey-500);
        }
        #close-sidebar-btn:hover {
            color: var(--moa-pink-500);
        }

        /* Responsif (Mobile) */
        @media (max-width: 1024px) { /* lg */
            .sidebar-nav {
                display: none; /* Sembunyikan sidebar desktop */
            }
            .sidebar-filter {
                /* Ubah jadi panel slide-in dari kanan */
                position: fixed;
                top: 0;
                right: 0;
                bottom: 0;
                z-index: 50;
                transform: translateX(100%);
                box-shadow: -10px 0 20px rgba(0,0,0,0.1);
            }
            .mobile-btn {
                display: block; /* Tampilkan tombol mobile */
            }
            .header-profile span {
                display: none; /* Sembunyikan teks "Hi, MOA!" */
            }
            .search-bar {
                width: 220px;
            }
            @media (max-width: 640px) { /* sm */
                .search-bar {
                    width: 180px;
                }
            }
        }
        
    </style>
</head>
<body>
    <div class="app-container">
        
        <!-- Sidebar Navigasi (Kiri) - Desktop -->
        <aside class="sidebar-nav">
            <h1 class="sidebar-nav-header">MOA â™¡ TXT</h1>
            <nav>
                <ul class="nav-list">
                    <li class="nav-item">
                        <a href="#" class="active">
                            <i data-lucide="home" class="w-5 h-5"></i>
                            Beranda
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#">
                            <i data-lucide="disc-3" class="w-5 h-5"></i>
                            Album
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#">
                            <i data-lucide="users" class="w-5 h-5"></i>
                            Member
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#">
                            <i data-lucide="music-2" class="w-5 h-5"></i>
                            Genre
                        </a>
                    </li>
                </ul>
            </nav>

            <div>
                <h2 class="nav-section-title">Playlist Kamu</h2>
                <ul class="playlist-list">
                    <li>
                        <a href="#">
                            <i data-lucide="list-music" class="w-4 h-4"></i>
                            Lagu Favorit
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <i data-lucide="list-music" class="w-4 h-4"></i>
                            Belajar Bareng TXT
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <i data-lucide="list-music" class="w-4 h-4"></i>
                            Sad Hour ðŸ’§
                        </a>
                    </li>
                </ul>
            </div>
        </aside>

        <!-- Sidebar Navigasi (Kiri) - Mobile -->
        <div id="sidebar-backdrop"></div>
        <aside id="mobile-sidebar">
            <h1 class="sidebar-nav-header">MOA â™¡ TXT</h1>
            <nav>
                <ul class="nav-list">
                    <li class="nav-item"><a href="#" class="active"><i data-lucide="home"></i>Beranda</a></li>
                    <li class="nav-item"><a href="#"><i data-lucide="disc-3"></i>Album</a></li>
                    <li class="nav-item"><a href="#"><i data-lucide="users"></i>Member</a></li>
                </ul>
            </nav>
            <button id="close-sidebar-btn">
                <i data-lucide="x" class="w-6 h-6"></i>
            </button>
        </aside>

        <!-- Konten Utama (Tengah) -->
        <div class="main-content-wrapper">
            
            <!-- Header -->
            <header class="main-header">
                <div class="header-left">
                    <button id="menu-btn" class="mobile-btn">
                        <i data-lucide="menu" class="w-6 h-6"></i>
                    </button>
                    <!-- Search Bar -->
                    <div class="search-bar">
                        <input id="search-input" type="text" placeholder="Cari lagu atau album...">
                        <div class="search-icon">
                            <i data-lucide="search" class="w-5 h-5"></i>
                        </div>
                    </div>
                </div>
                <div class="header-profile">
                     <button id="filter-btn-mobile" class="mobile-btn">
                        <i data-lucide="filter" class="w-6 h-6"></i>
                    </button>
                    <span>Hi, MOA!</span>
                    <img src="member-hueningkai.png" 
                         onerror="this.onerror=null;this.src='https://placehold.co/40x40/fecdd3/e11d48?text=MOA';"
                         alt="Profile">
                </div>
            </header>

            <!-- Main Content Area -->
            <main class="content-area">
                <h2 class="content-title">Semua Lagu TXT</h2>

                <!-- Grid Kartu Lagu -->
                <div id="song-grid">
                    <!-- Kartu lagu akan di-generate oleh JavaScript -->
                </div>

                <!-- Pesan jika tidak ada hasil -->
                <div id="no-results" style="display: none;">
                    <i data-lucide="frown" class="no-results-icon"></i>
                    <h3>Oops! Tidak ditemukan</h3>
                    <p>Coba kata kunci atau filter yang lain ya.</p>
                </div>
            </main>
        </div>

        <!-- Sidebar Filter (Kanan) -->
        <aside class="sidebar-filter" id="filter-sidebar">
             <button id="close-filter-btn-mobile" class="mobile-btn" style="position: absolute; top: 16px; right: 16px; color: var(--grey-500);">
                <i data-lucide="x" class="w-6 h-6"></i>
            </button>
            <h2 class="filter-title">Filter</h2>

            <h3 class="filter-section-title">Genre</h3>
            <div class="filter-list" id="genre-filter-list">
                <button class="filter-btn active" data-value="all">Semua Genre</button>
                <button class="filter-btn" data-value="Pop">Pop</button>
                <button class="filter-btn" data-value="Rock">Rock</button>
                <button class="filter-btn" data-value="R&B">R&B</button>
                <button class="filter-btn" data-value="Ballad">Ballad</button>
                <button class="filter-btn" data-value="Afro-pop">Afro-pop</button>
            </div>

            <h3 class="filter-section-title">Fokus Member</h3>
            <div class="filter-list" id="member-filter-list">
                <button class="filter-btn active" data-value="all">Semua Member</button>
                <button class="filter-btn" data-value="Soobin">Soobin</button>
                <button class="filter-btn" data-value="Yeonjun">Yeonjun</button>
                <button class="filter-btn" data-value="Beomgyu">Beomgyu</button>
                <button class="filter-btn" data-value="Taehyun">Taehyun</button>
                <button class="filter-btn" data-value="Huening Kai">Huening Kai</button>
            </div>
        </aside>

    </div>

    <!-- MEMUAT LUCIDE ICONS DI SINI, SEBELUM SCRIPT UTAMA -->
    <script src="https://unpkg.com/lucide-icons@0.378.0/dist/lucide.min.js"></script>

    <script>
        // Data Lagu TXT (Contoh)
        const allSongs = [
            { id: 1, title: 'Sugar Rush Ride', album: 'The Name Chapter: TEMPTATION', genre: 'Pop', members: ['Soobin', 'Yeonjun', 'Beomgyu', 'Taehyun', 'Huening Kai'], image: 'album-temptation.png' },
            { id: 2, title: '0X1=LOVESONG (I Know I Love You)', album: 'The Chaos Chapter: FREEZE', genre: 'Rock', members: ['Yeonjun', 'Taehyun'], image: 'album-freeze.png' },
            { id: 3, title: 'Anti-Romantic', album: 'The Chaos Chapter: FREEZE', genre: 'R&B', members: ['Soobin', 'Beomgyu', 'Huening Kai'], image: 'album-freeze.png' },
            { id: 4, title: 'Good Boy Gone Bad', album: 'minisode 2: Thursday\'s Child', genre: 'Rock', members: ['Soobin', 'Yeonjun', 'Beomgyu', 'Taehyun', 'Huening Kai'], image: 'album-thursdays-child.png' },
            { id: 5, title: 'Deja Vu', album: 'minisode 3: TOMORROW', genre: 'Pop', members: ['Yeonjun', 'Beomgyu', 'Taehyun'], image: 'album-tomorrow.png' },
            { id: 6, title: 'Blue Hour', album: 'minisode1: Blue Hour', genre: 'Pop', members: ['Soobin', 'Yeonjun', 'Beomgyu', 'Taehyun', 'Huening Kai'], image: 'album-blue-hour.png' },
            { id: 7, title: 'LO$ER=LOâ™¡ER', album: 'The Chaos Chapter: FIGHT OR ESCAPE', genre: 'Rock', members: ['Yeonjun', 'Huening Kai'], image: 'album-fight-or-escape.png' },
            { id: 8, title: 'Tinnitus (Wanna be a rock)', album: 'The Name Chapter: TEMPTATION', genre: 'Afro-pop', members: ['Yeonjun', 'Soobin', 'Huening Kai'], image: 'album-temptation.png' },
            { id: 9, title: 'Magic', album: 'The Chaos Chapter: FREEZE', genre: 'Pop', members: ['Taehyun', 'Huening Kai'], image: 'album-freeze.png' },
            { id: 10, title: 'Opening Sequence', album: 'minisode 2: Thursday\'s Child', genre: 'R&B', members: ['Taehyun', 'Beomgyu'], image: 'album-thursdays-child.png' },
            { id: 11, title: 'Chasing That Feeling', album: 'The Name Chapter: FREEFALL', genre: 'Pop', members: ['Soobin', 'Yeonjun', 'Beomgyu', 'Taehyun', 'Huening Kai'], image: 'album-freefall.png' },
            { id: 12, title: 'We Lost The Summer', album: 'minisode1: Blue Hour', genre: 'Pop', members: ['Soobin', 'Taehyun'], image: 'album-blue-hour.png' }
        ];

        // Fungsi untuk genre tag color
        const getGenreClass = (genre) => {
            switch (genre) {
                case 'Pop': return 'genre-pop';
                case 'Rock': return 'genre-rock';
                case 'R&B': return 'genre-r-b';
                case 'Ballad': return 'genre-ballad';
                case 'Afro-pop': return 'genre-afro-pop';
                default: return 'genre-default';
            }
        }

        // Fungsi untuk me-render kartu lagu
        const renderSongs = (songs) => {
            const grid = document.getElementById('song-grid');
            const noResultsEl = document.getElementById('no-results');
            
            if (songs.length === 0) {
                grid.innerHTML = '';
                noResultsEl.style.display = 'block';
                return;
            }

            noResultsEl.style.display = 'none';
            grid.innerHTML = songs.map(song => `
                <div class="song-card">
                    <div class="card-image-wrapper">
                        <img src="${song.image}" 
                             onerror="this.onerror=null;this.src='https://placehold.co/300x300/fecdd3/e11d48?text=MOA';"
                             alt="${song.album}" class="card-image">
                        <div class="card-play-button">
                            <button class="play-button">
                                <i data-lucide="play" class="icon-play"></i>
                            </button>
                        </div>
                    </div>
                    <div class="card-content">
                        <h3 class="card-title" title="${song.title}">${song.title}</h3>
                        <p class="card-album" title="${song.album}">${song.album}</p>
                        <span class="card-genre-tag ${getGenreClass(song.genre)}">${song.genre}</span>
                    </div>
                </div>
            `).join('');
            
            // Re-inisialisasi ikon setelah render
            // Panggilan ini sekarang aman karena script lucide sudah dimuat
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }
        };

        // Fungsi untuk filter dan search
        const filterAndRender = () => {
            const searchInput = document.getElementById('search-input').value.toLowerCase();
            
            // *** BARU: Baca filter dari tombol yang aktif ***
            const genreFilterEl = document.querySelector('#genre-filter-list .filter-btn.active');
            const genreFilter = genreFilterEl ? genreFilterEl.dataset.value : 'all';

            const memberFilterEl = document.querySelector('#member-filter-list .filter-btn.active');
            const memberFilter = memberFilterEl ? memberFilterEl.dataset.value : 'all';

            let filteredSongs = allSongs.filter(song => {
                const matchesSearch = song.title.toLowerCase().includes(searchInput) || 
                                      song.album.toLowerCase().includes(searchInput);
                
                const matchesGenre = genreFilter === 'all' || song.genre === genreFilter;
                
                const matchesMember = memberFilter === 'all' || song.members.includes(memberFilter);

                return matchesSearch && matchesGenre && matchesMember;
            });

            renderSongs(filteredSongs);
        };

        // --- Fungsi untuk Toggle Sidebar ---

        const backdrop = document.getElementById('sidebar-backdrop');
        
        // Navigasi Kiri (Mobile)
        const mobileNav = document.getElementById('mobile-sidebar');
        const openNavBtn = document.getElementById('menu-btn');
        const closeNavBtn = document.getElementById('close-sidebar-btn');

        const toggleNavSidebar = () => {
            mobileNav.classList.toggle('active');
            backdrop.style.display = backdrop.style.display === 'block' ? 'none' : 'block';
            
            // Cek jika filter sidebar terbuka, tutup
            if (mobileFilter.style.transform === 'translateX(0%)') {
                mobileFilter.style.transform = 'translateX(100%)';
            } else {
                 mobileNav.style.transform = mobileNav.style.transform === 'translateX(0%)' ? 'translateX(-100%)' : 'translateX(0%)';
            }
        };

        // Filter Kanan (Mobile)
        const mobileFilter = document.getElementById('filter-sidebar');
        const openFilterBtn = document.getElementById('filter-btn-mobile');
        const closeFilterBtn = document.getElementById('close-filter-btn-mobile');
        
        const toggleFilterSidebar = () => {
            backdrop.style.display = backdrop.style.display === 'block' ? 'none' : 'block';
            
            // Cek jika nav sidebar terbuka, tutup
            if (mobileNav.style.transform === 'translateX(0%)') {
                mobileNav.style.transform = 'translateX(-100%)';
            } else {
                mobileFilter.style.transform = mobileFilter.style.transform === 'translateX(0%)' ? 'translateX(100%)' : 'translateX(0%)';
            }
        };

        // Event Listeners
        document.addEventListener('DOMContentLoaded', () => {
            // Render semua lagu saat load
            renderSongs(allSongs);

            // Inisialisasi ikon statis
            // Kita panggil juga di sini untuk ikon di luar grid
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }

            // Listener untuk input search
            document.getElementById('search-input').addEventListener('input', filterAndRender);
            
            // *** BARU: Listener untuk tombol filter (Event Delegation) ***
            document.getElementById('genre-filter-list').addEventListener('click', (e) => {
                if (e.target.classList.contains('filter-btn')) {
                    // Hapus 'active' dari semua tombol di grup ini
                    e.target.parentElement.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
                    // Tambah 'active' ke tombol yang diklik
                    e.target.classList.add('active');
                    // Render ulang lagu
                    filterAndRender();
                }
            });

            document.getElementById('member-filter-list').addEventListener('click', (e) => {
                if (e.target.classList.contains('filter-btn')) {
                    e.target.parentElement.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
                    e.target.classList.add('active');
                    filterAndRender();
                }
            });

            // Listener untuk menu mobile
            openNavBtn.addEventListener('click', toggleNavSidebar);
            closeNavBtn.addEventListener('click', toggleNavSidebar);
            openFilterBtn.addEventListener('click', toggleFilterSidebar);
            closeFilterBtn.addEventListener('click', toggleFilterSidebar);
            backdrop.addEventListener('click', () => {
                // Tutup sidebar manapun yang terbuka
                mobileNav.style.transform = 'translateX(-100%)';
                mobileFilter.style.transform = 'translateX(100%)';
                backdrop.style.display = 'none';
            });
        });
    </script>
</body>
</html>